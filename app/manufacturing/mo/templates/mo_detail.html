<!DOCTYPE html>
<html>
<head>
    <title>MO Details</title>
</head>
<body>
    <h2><a href="/products/{{ mo[5] }}">{{ mo[6] }}</a></h2>
    <table>
        <tr>
            <th>ID</th>
            <th>Date Created</th>
            <th>Date Done</th>
            <th>BoM ID</th>
            <th>Status</th>
            <th>Cost</th>
        </tr>
        <tr>
            <td>{{ mo[0] }}</td>
            <td>{{ mo[1].strftime('%Y-%m-%d %H:%M') if mo[1] else '' }}</td>
            <td>{{ mo[2].strftime('%Y-%m-%d %H:%M') if mo[2] else '' }}</td>
            <td><a href="/manufacturing/boms/{{ mo[3] }}">{{ mo[3] }}</a></td>
            <td>{{ mo[4] }}</td>
        </tr>
    </table>
    <h2>BoM Lines:</h2>
    <table>
        <tr>
            <th>ID</th>
            <th>Component ID</th>
            <th>Component Name</th>
            <th>Quantity</th>
            <th>Available</th>
            <th>Unit Price</th>
            <th>Cost</th>
        </tr>
        {% for bom_line in bom_lines %}
        <tr>
            <td>{{ bom_line[0] }}</td>
            <td><a href="/manufacturing/products/{{ bom_line[2] }}">{{ bom_line[2] }}</a></td>
            <td>{{ bom_line[3] }}</td>
            <td>{{ bom_line[4] }}</td>
            <td>
                {% if bom_line[6] <= bom_line[4] %}
                  {{ bom_line[6] }} / {{ bom_line[4] }}
                {% else %}
                  {{ bom_line[4] }} / {{ bom_line[4] }}
                {% endif %}
              </td>
              
            <td>{{ bom_line[5] }}</td>
            <td>{{ bom_line[5] * bom_line[4] }}</td>
        </tr>
        {% endfor %}
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td><strong>Total: {{ components_cost }}</strong></td>
        </tr>
    </table>
</body>
</html>